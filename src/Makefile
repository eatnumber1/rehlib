.PHONY: src/all src/clean src/depclean src/test

src/all: $(REHLIB)

src/clean:
	$(RM) $(SRC_OBJECTS) $(SRC_TEST_OBJECTS) $(REHLIB) $(REHLIB_TEST)

src/depclean:
	$(RM) $(SRC_DEPS) $(SRC_TEST_DEPS)

src/test: $(REHLIB_TEST)

-include $(SRC_DEPS) $(SRC_TEST_DEPS)

$(SRC_OBJECTS): CPPFLAGS := $(CPPFLAGS) $(GLIB_CPPFLAGS)

$(REHLIB): $(SRC_OBJECTS)
$(REHLIB): OBJECTS := $(SRC_OBJECTS)
$(REHLIB): LIBRARIES := $(LIBRARIES) $(GLIB_LIBRARIES) $(GMODULE_LIBRARIES)

$(SRC_TEST_OBJECTS): CPPFLAGS := $(CPPFLAGS) $(GLIB_CPPFLAGS) -I$(SRCDIR)

$(REHLIB_TEST): $(SRC_TEST_OBJECTS)
$(REHLIB_TEST): OBJECTS := $(SRC_TEST_OBJECTS)
$(REHLIB_TEST): LIBRARIES := $(LIBRARIES) $(GLIB_LIBRARIES) $(GMODULE_LIBRARIES)
